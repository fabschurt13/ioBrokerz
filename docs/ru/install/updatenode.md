---
title: Обновить NodeJS
lastChanged: 30.05.2019
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/install/updatenode.md
hash: zPY5Kwr9kgbSS2oVslsx0iqAc8IUtInAkzj08tJ6P+w=
---
# Обновление NodeJS для ioBroker
Каждый год выпускается новая версия Node-JS, которая помечается как LTS (долгосрочная поддержка) с прямым номером версии и будет поддерживаться в течение нескольких лет.
В то же время более ранняя версия Node-JS LTS достигает конца жизни.
В 2019 году NodeJS версия 12 будет объявлена LTS в октябре, а версия 6 была выпущена в конце срока эксплуатации.

Хотя js-контроллер до версии 1.5.11 по-прежнему поддерживает Node-JS начиная с версии 4, новые адаптеры становятся все более распространенными, например, с. Node-JS 8 как основное требование, потому что каждая новая версия Node-JS приносит новые функции.

Все версии Node-JS с нечетными номерами версий являются версиями разработки и официально не поддерживаются и не должны использоваться!

Но даже последняя версия не имеет смысла, поскольку здесь часто встречаются не совсем совместимые библиотеки.
На данный момент Node-JS 10 будет рекомендуемой версией.

Каждые несколько лет обновляется Node-JS для установки ioBroker, и в этой статье должно быть кратко изложено, как мы действуем наилучшим образом.

Прежде всего, ioBroker следует остановить, чтобы обновления не вызывали побочных эффектов или сбоев.
Пожалуйста, проверьте также, завершены ли все процессы с помощью «io». начать.

Кроме того, конечно, резервная копия должна быть обязательно создана.
Вы можете использовать адаптер BackItUp или командную строку

```iobroker backup```

Следующим шагом является обновление Node-JS в системе до желаемой новой версии.
В Linux достаточно просто выполнить команды установки Nodesource, как указано в [https://github.com/nodesource/distributions#debinstall](https://github.com/nodesource/distributions#debinstall).
Для macOS на [https://nodejs.org/en/download/](https://nodejs.org/en/download/) есть установщик, который вы просто переустанавливаете.
Если установщик ioBroker использовался под Windows, пожалуйста, НЕ обновляйте версию Nodejs / npm самостоятельно, а следуйте инструкциям установщика.

К сожалению, это только половина работы, так как есть много используемых модулей модулей, которые устанавливаются во время установки для текущего тогда Node-JS.
При обновлении Node JS все эти модули также должны быть обновлены, иначе будут ошибки во время выполнения.

Есть несколько способов обновить это:

1. **восстановление npm**

Первая попытка всегда должна быть с командой npm rebuild в каталоге ioBroker, потому что она работает наиболее чисто и запускается непосредственно из управления пакетами. В идеале это займет несколько минут, и некоторые предупреждения могут быть перечислены.
Но если есть ошибки, то вы должны точно их проверить и решить ... это сложная часть здесь. В следующем посте мы попытаемся собрать все известные из этих случаев с вашими подходами решения. Если это работает, это самый быстрый и чистый способ.

2. **переустановить скрипт**

Если этого не происходит, контроллер js включает скрипт переустановки (reinstall.sh или js-controller 1.5 reinstall.js). Этот скрипт обнаружит все установленные адаптеры ioBroker, затем удалит их из каталога node_modules и переустановит. Этот подход немного дороже, чем пересборка npm, но он служит той же цели. Это обычно работает хорошо, но вы не должны нарушать процесс. Если это произойдет или возникнут проблемы, начинающиеся после этой процедуры, то лучше всего выбрать путь в следующей точке.
Сценарий reinstall.sh, который был включен в js-controller 1.4, имеет проблему с форматированием и должен использоваться для Linux с командой

... ??? быть исправлено так оно и есть.

3. **сброс узловых модулей**

Другой вариант, который занимает немного больше времени, - это просто удалить все модули ode-JS, вручную установить js-контроллер, а затем запустить ioBroker и автоматически установить отсутствующие адаптеры.
Для этого удалите весь каталог node_modules в каталоге ioBroker. Затем вы устанавливаете контроллер в соответствующей версии (например, 1.5.11, которая в настоящее время стабильна):

```npm install iobroker.js-controller@1.5.11 --production```

Затем вы запускаете ioBroker. Важно, чтобы каталог iobroker-data не изменялся.
Затем ioBroker запускается и по очереди обнаруживает, что адаптеры, которые он хочет запустить, не установлены, и устанавливают их. В зависимости от системы это может занять некоторое время - иногда до нескольких часов (или всю ночь на медленных SD-картах). Но тогда все должно быть обновлено.

4. **Переустановка с восстановлением**

Небольшая модификация последнего варианта - переустановка. Здесь вы защищаете каталог «iobroker-data» (или используете резервную копию сверху). Затем удалите весь каталог ioBroker и используйте установщик. Сразу после этого ioBroker снова останавливается (который запускается автоматически после установки) и копирует каталог iobroker-data или использует «восстановление iobroker». Затем вы снова запускаете ioBroker. Остальная часть запускается как в варианте 3 и занимает свое время.

Пожалуйста, дайте отзыв о том, что работает для вас, что вы используете и каковы проблемы и ваши решения.
---
translatedFrom: en
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/adapterref/iobroker.parser/README.md
title: без названия
hash: 1xpg1MP1AYgU5c5rd9cDJwleBI8cpRXpm7lzvwoML1U=
---
![логотип](../../../en/adapterref/iobroker.parser/admin/parser.png) Адаптер парсера ioBroker =================

![Количество установок](http://iobroker.live/badges/parser-stable.svg)
![Версия NPM](http://img.shields.io/npm/v/iobroker.parser.svg)
![Загрузки](https://img.shields.io/npm/dm/iobroker.parser.svg)
![тесты](https://travis-ci.org/ioBroker/ioBroker.parser.svg?branch=master)
![NPM](https://nodei.co/npm/iobroker.parser.png?downloads=true)

Этот адаптер позволяет анализировать данные, полученные через URL или в файлах с регулярными выражениями.

## Настройки
### Интервал опроса по умолчанию
Это значение будет использоваться, если для записи не указан интервал опроса. Интервал в миллисекундах описывает частоту чтения ссылки или файла.

### Таблица
С помощью кнопки плюс новые записи будут добавлены в таблицу.

Поля таблицы:

- *Имя* - это имя штата и не может содержать пробелы.
- * URL или имя файла * - это URL-ссылка, например * https://darksky.net/forecast/48.1371,11.5754/si24/de* для мюнхенской погоды.
- * RegEx * - регулярное выражение, как извлечь данные из ссылки. Существует хороший сервис для проверки выражений регулярных выражений: [regex101] (https://regex101.com/). Например. * temp swip "> (-? \ d +) ˚ <* для строки выше.
- *Роль* - одна из ролей:
    - custom - пользователь определяет себя через * admin "роль
    - температура - значение есть температура
    - значение - значение является числом (например, диммер)
    - жалюзи - значение является слепой позицией
    - switch - значение - это положение переключателя (true / false)
    - кнопка - значение кнопки
    - индикатор - логический индикатор
- *Тип* - тип переменной. Один из логических, число, строка, JSON.
- *Item* - номер найденного элемента, начиная с 0.
- *Единица* - единица измерения стоимости. Например. *° С*
- *Старый* - если значение не может быть прочитано или найдено на странице, поэтому не обновляйте фактическое сохраненное значение.
- *Subs* - подставить значения. Это значение будет использоваться, если файл или URL недоступны.
- *Коэффициент / Смещение* - *Расчетное значение* = *Извлеченное значение* * Коэффициент + смещение, чтобы немедленно изменить значение. Используется только для номеров.
- *Интервал* - интервал опроса в мс. Если не установлено или 0, то будет использоваться интервал по умолчанию.

## Пример настроек
| Имя | URL или имя файла | RegEx | Роль | Тип | Блок | Интервал |
|-------------------|:-----------------------------------------------------|:----------------------|--------------|---------|------|----------|
| температура Мюнхен | https://darksky.net/forecast/48.1371,11.5754/si24/de | swip "> (-? \ d +) ˚ <| температура | число | °C | 180000 |
| forumRunning | http://forum.iobroker.net/ | Форум | индикатор | логическое значение | | 60000 |
| cloudRunning | https://iobroker.net/ | Уведомление о конфиденциальности | индикатор | логическое значение | | 60000 |
| температура процессора | / sys / devices / virtual / thermal / thermal_zone0 / temp | (. *) | температура | номер | °C | 30000 |

* Примечание: * В полученном тексте все новые строки будут заменены пробелами, чтобы разрешить многострочный поиск.

## О регулярных выражениях
Регулярные выражения - это мощный инструмент для анализа и извлечения данных из строк.

Вы можете эффективно проверить, находится ли какой-либо текст в строке, или извлечь какой-либо текст из строки в переменную.

Для логических типов достаточно написать простой RegEx. Для числовых типов вы должны отметить число в скобках - "()". Например. чтобы извлечь число из *Температура 5 °C* Вы должны использовать выражение "(\ d +)".

Подробнее о регулярных выражениях можно узнать здесь: https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/RegExp

### Примеры:
- *.at* соответствует любой трехсимвольной строке, заканчивающейся на «at», включая «hat», «cat» и «bat».
- *[hc] at* соответствует "hat" и "cat".
- *[^ b] at* соответствует всем строкам, совпадающим с .at, кроме "bat".
- *[^ hc] at* соответствует всем строкам, сопоставленным .at, кроме "hat" и "cat".
- *^ [hc] at* соответствует «hat» и «cat», но только в начале строки или строки.
- *[hc] в $* соответствует "hat" и "cat", но только в конце строки или строки.
- *\ [. \]* соответствует любому отдельному символу, заключенному в «[» и «]», так как экранированные скобки, например: «[a]» и «[b]».
- * s. \ ** соответствует s, за которым следует ноль или более символов, например: «s» и «saw» и «seed».
- *[hc] + at* соответствует «hat», «cat», «hhat», «chat», «hcat», «cchchat» и т. д., но не «at».
- *[hc]? at* соответствует "hat", "cat" и "at".
- * [hc] \ * at * соответствует "hat", "cat", "hhat", "chat", "hcat", "cchchat", "at" и так далее.
- *cat | собака* соответствует "кошка" или "собака".
- *(\ d +)* - получить число из строки
- *сейчас (\ w +)* позже - получить слово между "сейчас" и "позже"

### Самые полезные выражения
- (-? \ d +) получить число отрицательное или положительное

## Коды качества
Значения могут иметь коды качества:

- 0 - ОК
- 0x82 - URL или файл не могут быть прочитаны.
- 0x44 - номер или строковое значение не найдены в тексте

## Changelog
### 1.0.7 (2018-10-08)
* (bluefox) Comma will be replaced automatically by point for the offset and for the factor

### 1.0.6 (2018-09-22)
* (bluefox) fix parser

### 1.0.5 (2018-08-30)
* (bluefox) Multi-line search allowed

### 1.0.2 (2018-08-06)
* (bluefox) Iterations in regex were corrected

### 1.0.1 (2017-12-10)
* (bluefox) Added additional option: old value

### 1.0.0 (2017-05-19)
* (bluefox) Allow set the number of found item

### 0.2.2 (2017-04-03)
* (Apollon77) fix handling of multiple fields for one URL

### 0.2.1 (2017-02-24)
* (bluefox) fix error with timestamp

### 0.2.0 (2017-02-01)
* (bluefox) Add visual test

### 0.1.1 (2017-01-30)
* (bluefox) move to common group

### 0.0.1 (2017-01-16)
* (bluefox) initial commit
---
translatedFrom: en
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/adapterref/iobroker.device-reminder/README.md
title: ioBroker.device-напоминание
hash: CKDOj7tho6HLlSTu7B9m+ZEKIO6VT6wd96A37iLgpOI=
---
![Логотип](../../../en/adapterref/iobroker.device-reminder/admin/icon.png)

![Количество установок (стабильно)](http://iobroker.live/badges/device-reminder-stable.svg)
![Количество установок (последнее)](http://iobroker.live/badges/device-reminder-installed.svg)
![Версия NPM](http://img.shields.io/npm/v/iobroker.device-reminder.svg)
![Загрузки](https://img.shields.io/npm/dm/iobroker.device-reminder.svg)
![Статус зависимости](https://img.shields.io/david/xenon-s/iobroker.device-reminder.svg)
![Лицензия](https://img.shields.io/badge/license-MIT-blue.svg?style=flat)
![Пожертвование Paypal](https://img.shields.io/badge/paypal-donate%20%7C%20spenden-blue.svg)
![NPM](https://nodei.co/npm/iobroker.device-reminder.png?downloads=true)

# IoBroker.device-напоминание
![Тестирование и выпуск](https://github.com/xenon-s/iobroker.device-reminder/workflows/Test%20and%20Release/badge.svg)

## Немецкий ридми нужен?<br> [Немецкий ридми](https://github.com/Xenon-s/ioBroker.device-reminder/blob/master/README_GER.md)
<br>

## Адаптер для мониторинга статусов устройств
Этот адаптер может определять, было ли устройство включено, работать или выключено с помощью измерительных розеток, и реагировать на это. Затем сообщения могут выводиться автоматически через телеграмму, whatsapp, alexa и sayit (возможен множественный выбор для каждого устройства). Также возможно автоматическое отключение розетки после завершения процесса (также с задержкой по времени). (предыдущий проект, из которого был разработан этот адаптер: https://github.com/Xenon-s/js.device-reminder)

## Что следует учитывать?
Интервал обновления от «живого значения потребления (означает **&quot; _ энергия &quot;**)» для большинства устройств не должен превышать 10 секунд, в противном случае сообщения могут появляться с большой задержкой.<br> команда в консоли Tasmota: TelePeriod 10<br> **Запись:**

- Значения ниже 1 ватта считаются 0 ватт и автоматически означают «** выключено **».
- Значения выше 1 ватта указывают на то, что устройство находится в режиме «** ожидания **».

## Какие устройства можно отслеживать в настоящий момент?
Существуют значения по умолчанию для следующих устройств:

- стиральная машина,
- сушилка,
- посудомоечная машина,
- электрический чайник,
- компьютер,
- микроволновая печь

Эти значения были определены в течение нескольких месяцев и должны подходить для большинства устройств.<br> Кроме того, доступно 5 настраиваемых устройств. При необходимости они могут быть настроены пользователем. Пороговые значения для всех типов устройств также можно настроить вручную.<br>

## Что возможно для каждого устройства?
- Уведомление при запуске устройства
- Уведомление в конце каждого запуска устройства
- Уведомление в Telegram (возможно несколько идентификаторов)
- Уведомление Alexa (возможно несколько идентификаторов)
- Уведомление WhatsApp, возможно несколько идентификаторов)
- Уведомления могут быть созданы свободно или могут быть предопределены внешним скриптом
- Точки данных с текущим состоянием, текущим потреблением и последним отправленным статусным сообщением, чтобы использовать значения из этого адаптера в других скриптах
- Отключите устройства при необходимости (также с задержкой по времени), когда процесс будет признан завершенным<br>

<br> <br>

# Инструкции
![config.png](../../../en/adapterref/iobroker.device-reminder/admin/config.png)

Прежде всего, все необходимые устройства, Alexas и т. Д. Должны быть созданы в Config, прежде чем их можно будет использовать. Когда все записи будут заполнены, вы должны нажать ** «щелкните здесь, чтобы перезагрузить» **. Только тогда устройства действительно созданы и их можно будет дополнительно настроить во вкладке «** УСТРОЙСТВА **».

## Создать устройство
Сначала необходимо создать новую запись с помощью **"+ добавить устройство"** Это создает следующую строку таблицы: ![addDevice.png](../../../en/adapterref/iobroker.device-reminder/admin/addDevice.png)

- **имя устройства** произвольно выбираемое имя
- **тип устройства** здесь вы должны выбрать, какое это устройство, чтобы вычисления в адаптере могли выполняться правильно
- **потребление пути / энергия** нажмите кнопку с тремя белыми точками, чтобы открыть управление объектами. Вы должны выбрать точку данных, которая показывает **текущее потребление**
- **включение / выключение пути** нажмите кнопку с тремя белыми точками, чтобы открыть управление объектами. Вы должны выбрать точку данных, которая включает / выключает **сокет** (не обязательно)
- **Начальный текст** уведомление будет отправлено при запуске устройства (также возможны специальные символы). Не должно быть "." в конце текста!
- **Конечный текст** уведомление будет отправлено, когда устройство завершит процесс (также возможны специальные символы). Не должно быть "." в конце текста!

Используя **начальный текст** и **конечный текст** вы также можете получить сообщение из внешней точки данных. Это сообщение считывается из точки данных с задержкой в 1 секунду после изменения состояния устройства. Таким образом, вы можете создать сообщение с помощью внешнего сценария. Адаптер автоматически определяет, поступило ли сообщение из точки данных или оно было просто введено вручную. Чтобы выбрать точку данных, просто нажмите кнопку с тремя белыми точками, а затем выберите соответствующую точку данных. **Обратите внимание** можно использовать только точку данных **или** введенное вручную сообщение!<br><br>

## Создать Alexa
![addAlexa.png](../../../en/adapterref/iobroker.device-reminder/admin/addAlexa.png) Сначала необходимо создать новую запись с помощью **"+ добавить устройство alexa"** Это создает следующую строку таблицы:

- **alexa name** произвольно выбираемое имя, также возможны специальные символы
- **alexa «объявление» / «говорить»** здесь вы **должны** выбрать точку данных, которая заставляет ваш Alexa говорить. Чтобы выбрать точку данных, просто нажмите кнопку с тремя маленькими белыми точками.
- **volume 0-100** *необязательно* здесь вы можете установить громкость (по умолчанию: 50). Возможны значения от 0 до 100.

Последние 4 поля можно использовать для создания периода времени, в течение которого вашему Alexa разрешено говорить. По умолчанию активен период с 00:00 до 23:59.

- **«время активного часа»** время начала в часах.
- **«время активности мин.»** время начала в минутах.
- «час бездействия»: время окончания в часах
- **«время бездействия мин.»** время окончания в минутах

<br> <br>

## Создание устройства SayIt
![addSayit.png](../../../en/adapterref/iobroker.device-reminder/admin/addSayit.png) Сначала вы должны создать новую запись с помощью **"+ добавить устройство Sayit"** Это создает следующую строку таблицы:

- **sayit name** произвольно выбираемое имя, также возможны специальные символы
- **sayit path "../ text"** выберите точку данных "text" в соответствующей папке sayIt устройства. Текстовый вывод будет отправлен в эту папку.
- **volume 0-100** *необязательно* здесь вы можете установить громкость (по умолчанию: 50). Возможны значения от 0 до 100.
- **«время активного часа»** время начала в часах.
- **«время активности мин.»** время начала в минутах.
- «час бездействия»: время окончания в часах
- **«время бездействия мин.»** время окончания в минутах

<br> <br>

## Создать пользователя WhatsApp
![addWhatsapp.png](../../../en/adapterref/iobroker.device-reminder/admin/addWhatsapp.png) Сначала вам нужно создать новую запись с **"+ добавить пользователя WhatsApp"** Это создает следующую строку таблицы:

- **WhatsApp name** произвольно выбираемое имя, также возможны специальные символы
- **whatsapp path "sendMessage"** выберите точку данных "sendMessage" в соответствующей папке WhatsApp. Здесь будет отправлен текстовый вывод.

<br> <br>

## Сохранить конфигурацию
Когда все устройства и мессенджеры были вставлены, вам нужно сохранить, нажав кнопку Сохранить ** нажмите здесь, чтобы перезагрузить ** на странице! Это обновит таблицу на вкладке «** устройства **». Поскольку возникли проблемы с отображением, таблица формируется с небольшой задержкой.<br> *Примечание:* Если вы измените имя существующего устройства, а затем нажмете кнопку ** щелкните здесь, чтобы перезагрузить **, устройство будет воссоздано в таблице и должно быть настроено соответствующим образом (назначить alexa и т. Д.).

![save_device2.png](../../../en/adapterref/iobroker.device-reminder/admin/save_device2.png)<br> Кнопка активна только тогда, когда вставлены новые устройства или изменены существующие!<br><br>

# Настроить устройства
![configureDevices.png](../../../en/adapterref/iobroker.device-reminder/admin/configureDevices.png)

## Настроить собственный статус устройства
- **в действии** состояние, которое будет отображаться, когда устройство работает.
- **в режиме ожидания** состояние отображается, когда устройство находится в режиме ожидания.
- **устройство выключено** состояние отображается при выключении устройства.

## Настроить устройство
После нажатия кнопки «** щелкните здесь, чтобы перезагрузить **» на странице конфигурации отображаются все созданные устройства, которые можно настроить.

- **активный** активирован по умолчанию. Здесь вы можете временно отключить устройство, чтобы оно больше не отправляло никаких уведомлений.
- **имя устройства** создается автоматически
- **Устройства Alexa** здесь перечислены все ранее созданные Alexas, и их можно добавить, нажав
- **sayit ID** здесь перечислены все ранее созданные устройства sayit, и их можно добавить, нажав
- **Пользователь WhatsApp** здесь перечислены все ранее созданные пользователи WhatsApp, и их можно добавить, нажав
- **Имя пользователя Telegram** здесь отображаются все доступные пользователи Telegram, которые можно назначить устройству, щелкнув по ним. Соответствующий экземпляр указывается в [квадратных] скобках.

** Если имена не должны отображаться: ** Проверьте, содержит ли запись в "telegram.X.communicate.users" (X означает соответствующий экземпляр, например, 0) следующую структуру: "{" ID IN NUMBERS " : {"firstName": "User1"}} ", в противном случае его можно легко настроить. Адаптер ищет как ** firstName **, так и ** userName **. Вы можете решить, какое имя хотите использовать. Можно выбрать только ** firstName ** или ** userName **!

- **автоотключение** если этот параметр выбран, розетка автоматически отключится после завершения процесса.
- **таймер** здесь вы можете указать время ожидания в **минутах** По истечении тайм-аута розетка будет отключена *, если активировано автоматическое отключение *. На уведомление о завершении устройства тайм-аут не влияет!
- **Обнаружение прерывания** если этот параметр активирован, адаптер пытается определить, было ли устройство уже выключено вручную перед уведомлением, а затем больше не сообщает.

После нажатия на «** Сохранить и закрыть **» теперь создается папка в разделе *Объекты -> устройство-напоминание* для каждого вновь созданного Устройства, в котором

- текущее время выполнения в чч: мм: сс
- текущее время выполнения в миллисекундах
- текущее состояние устройства
- текущее живое потребление (полученное из *потребления пути / энергии* и
- сообщение для мессенджеров
- Среднее потребление (может использоваться как помощь для определения ваших собственных пороговых значений)
- не беспокоить (если активирован, через **голосовой помощник** сообщения не отправляются.)

отображается.<br><br>

# Настроить тип устройства
![default-devices.png](../../../en/adapterref/iobroker.device-reminder/admin/default-devices.png) **Внимание** изменение значений может привести к тому, что устройства больше не будут правильно записываться и, следовательно, могут появиться ложные сообщения.

В первой таблице отображаются значения "по умолчанию". Эти значения были определены в течение нескольких месяцев и не подлежат корректировке. Тем не менее я объясняю значение отдельных значений.

- **начальное значение** начальное значение в ваттах, которое должно быть превышено для распознавания устройства как запущенного.
- **final value** окончательное значение в ваттах, которое должно быть меньше нуля, чтобы устройство можно было распознать как готовое.
- Количество значений «start» **здесь вы указываете, как часто «начальное значение»** должно быть превышено **последовательно** Если значение один раз упадет ниже этого значения, запуск прерывается. Среднее значение этих значений должно быть выше начального, чтобы оно было признано начальным.

* Пример: значение должно быть 10 Вт и должно быть превышено 3 раза подряд. 1. 15 Вт, 2. 1 Вт, 15 Вт => фаза запуска была прервана, так как второе значение было ниже 10. *.

- Число значений "конец" **: Здесь указывается, сколько значений должно быть записано, прежде чем оно будет вычислено, завершено ли устройство. Чем меньше здесь значений, тем неточнее результат и возрастает опасность ложных сообщений. Чем выше значение, тем точнее запись. Однако недостатком является то, что готовое сообщение отправляется с большой задержкой. Конец распознается только тогда, когда "количество значений заканчивается" и среднее потребление ниже "конечного значения".

<br> <br>

* Краткий пример расчета: *Значения потребления поступают каждые 10 секунд. **конечное значение** установлено на 50, **значения заканчиваются** на 100. 100 значений (* длится 100 значений x 10 секунд = 1000 секунд* записываются после того, как устройство было распознано как запущенное, и только затем среднее значение рассчитывается. Если среднее значение ниже 50, примерно через 16,5 минут (мы помним, что **окончание значений** = 100 значений) **завершено** распознается и отправляется сообщение (если настроено). Если значение больше 50, ничего не происходит, потому что устройство все еще работает. Теперь каждое последующее значение заменяет самое старое, и новое среднее значение рассчитывается после каждого нового значения.<br><br>

Если вы до сих пор читали и все еще думаете, что вам нужны специальные значения, для бесплатного проектирования доступны **5 настраиваемых типов** custom-devices.png] (admin / custom-devices.png)

Чтобы узнать больше об этой функции, просто прочтите об этом здесь, в «** устройства по умолчанию **».

# Служба поддержки
** Если вам нравятся мои работы: **<br>

[![PayPal] (https://www.paypalobjects.com/en_US/DK/i/btn/btn_donateCC_LG.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=3EYML5A4EMJCW&source=url)<br><br>

## Changelog
<!--
	Placeholder for the next version (at the beginning of the line):
    ### __WORK IN PROGRESS__
-->

### 0.7.4 (2020-12-20)
* (xenon-s) bugfix: telegram instance was not recognised correctly
* (xenon-s) bugfix: abort detection prevented sending of notifications

### 0.7.1 (2020-12-17)
* (xenon-s) fix telegram bug
* (xenon-s) Deleted incorrect version numbers in the io package

### 0.7.0 (2020-12-10)
* (xenon-s) Data is now queried cyclically

### 0.6.2 (2020-12-04)
* (xenon-s) bugfix index_m

### 0.6.0 (2020-12-03)
* (xenon-s) bugfix: alexa speak-volume when input is empty
* (xenon-s) bugfix: telegram now shows both names, otherwise there were errors in the notifications 
* (xenon-s) add: Device status can now be configured yourself

### 0.5.4 (2020-11-28)
* (xenon-s) calculation optimised, custom / default values may have to be adjusted if they have been changed by the user

### 0.5.0 (2020-11-22)
* (xenon-s) bugfix: volume sayit
* (xenon-s) add: volume alexa
* (xenon-s) DP runtime in milliseconds

### 0.4.10 (2020-11-17)
* (xenon-s) bugfix main.js

### 0.4.0 (2020-11-11)
* (xenon-s) config page revised to simplify the input of devices
* (xenon-s) inserted a break, so that it is recognized, if a device is switched off prematurely at the device switch
* (xenon-s) bugfix: telegram users are not always recognized correctly and displayed incorrectly
* (xenon-s) adjustable values inserted at "Type
* (xenon-s) readme extended and adapted

### 0.3.0 (2020-11-07)
* (xenon-s) standby detection, even if the power outlet should not be switched off
* (xenon-s) It is now possible to get messages from an external data point and send them as start / end message
* (xenon-s) device "microwave" added

### 0.2.1 (2020-11-05)
* (xenon-s) readme adapted

### 0.2.0 (2020-11-05)
* (xenon-s) update to version 0.2: index_m completely revised and whatsapp added

### 0.1.0 (2020-10-23)
* (xenon-s) beta release

### 0.0.1 (2020-10-20)
* (xenon-s) initial commit

## License

MIT License

Copyright (c) 2020 xenon-s

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
---
translatedFrom: en
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/adapterref/iobroker.broadlink2/README.md
title: ! [Logo] (./ admin / broadlink2.png) Управляет устройствами, совместимыми с BroadLink
hash: Wu14KdJTJSFWbkb4/bCIIoRgWFIPOPdGnxCp67MghtQ=
---
# ![логотип](../../../en/adapterref/iobroker.broadlink2/./admin/broadlink2.png) Управление устройствами, совместимыми с BroadLink

![Версия NPM](http://img.shields.io/npm/v/iobroker.broadlink2.svg)
![установлены](http://iobroker.live/badges/broadlink2-installed.svg)
![Загрузки](https://img.shields.io/npm/dm/iobroker.broadlink2.svg)
![Трэвис-CI](http://img.shields.io/travis/frankjoke/ioBroker.broadlink2/master.svg)

[Deutsche Anleitung переведено Google](https://translate.google.com/translate?sl=en&tl=de&u=https%3A%2F%2Fgithub.com%2Ffrankjoke%2FioBroker.broadlink2%2Fblob%2Fmaster%2FREADME.md)

[Русские инструкции переведены с гуглом](https://translate.google.com/translate?sl=en&tl=ru&u=https%3A%2F%2Fgithub.com%2Ffrankjoke%2FioBroker.broadlink2%2Fblob%2Fmaster%2FREADME.md)

## Адаптер для различных WLan-устройств, совместимых с Broadlink (RM ++, SP ++, A1, Floureon, S1C, LB1)
Это адаптер ioBroker для нескольких коммутаторов Broadlink, таких как RM2, RM3, RM Plus, SP1, SP2, SP3, Honeywell SP2, SPMini, SPMini2, SPMiniPlus и некоторых продуктов OEM от них.
Также поддерживаются удаленные контроллеры, такие как RM2, RM Mini, RM Pro Phicomm, RM2 Home Plus, RM2 Home Plus GDT, RM2 Pro Plus, RM2 Pro Plus2 и RM2 Pro Plus BL. Несколько контроллеров будут генерировать свои собственные записи и должны быть обучены отдельно.
Он сканирует сеть, чтобы найти совместимые устройства и устанавливает их (в настоящее время только коммутаторы типа SP?).

Если вы изучили состояния для RM *, а затем переименовали их имя, идентификатор штата также изменится на новое имя!

Вы также можете создавать свои собственные новые команды в LearnedStates, если вы используете «code» + ваш код в качестве значения (с «CODE_» перед кодом или даже лучше (из-за того, что оно останется, если вы переименуете состояние) добавьте поле «code» 'с помощью карандаша admin.object и поместите туда шестнадцатеричный код (без' CODE_ '!).

Адаптер имеет фиксированные состояния для отправки кодов с RM-устройств или для их изучения. Он также может отправлять отдельные сцены (действия на нескольких устройствах).

Если устройства, настроенные на определенном IP-адресе, не найдены снова, они будут помечены как notReachable! Если они подключены снова, они будут использоваться в обычном режиме.

Если устройство не отвечает в течение 5 минут подряд, оно установлено на недоступное. ***Устройства notReachable*** будут выдавать предупреждающее сообщение журнала при каждом x сканировании. После некоторых сканирований адаптер попытается снова найти их по тому же MAC-адресу.

Пожалуйста, удалите старые устройства из admin.objects на случай, если вы удалите их навсегда или переименуете в своем роутере!

Адаптер пытается сначала найти устройство по имени, а затем по его MAC-адресам. Если имя изменяется из-за изменения IP-адреса, например, и Mac-адрес остается прежним, то устройство будет продолжать использовать старое имя. Если устройство меняется на новое устройство с новым Mac, вы можете использовать переименование устройства в конфигурации, чтобы вместо этого использовать старое имя устройства.

### Примечание по опросу
* Устройства SP1 не могут быть опрошены.
* Если вы используете только устройства RM, опрос может быть установлен на 2 минуты (120 секунд), но не должен быть установлен выше, так как в противном случае они могут быть не авторизованы повторно.
* Если вы используете переключатели, которые можно переключать вручную, то отливка должна составлять 30 с-1 минуту, чтобы отразить изменения в течение минуты.

## Конфигурация
* Введите префикс сетевого адреса в конфигурации, который должен быть удален при создании имен устройств
* Введите количество секунд между опросами. В каждом опросе все устройства SP *, исключающие SP1, спрашивают, каково состояние коммутатора. Эту функцию можно отключить, установив задержку опроса на 0. На некоторых устройствах RM с показаниями температуры также будет обновляться температура.
* Теперь вы можете добавить IP-адреса устройств, которые будут найдены / включены, которые также находятся в другой сети, чем сеть адаптера. В этом случае вам необходимо убедиться, что компьютер, на котором работает адаптер, знает внутренние и внешние таблицы маршрутизации, как подключиться к этой другой сети.
* Параметр `use IP interface` может быть настроен на использование указанного адреса интерфейса, это может помочь, если у вас есть LAN и WLAN в системе, где работает iobroker, и вы не хотите сканировать на первом интерфейсе, но только на WLAN, это может помочь также, если локальный интерфейс отличается от внешнего в некоторых средах докеров или виртуальных машин. Вам необходимо ввести IPv4-адрес интерфейса, который будет использоваться в качестве адреса источника, в противном случае адаптер будет использовать 0.0.0.0 и прослушивать только все локальные интерфейсы.

## How-To, чтобы узнать коды на RM
* В объектах ioBroker вы можете найти "broadlink2. [Devicename] .Learn или LearnRF для устройств типа '+'".
* Для устройств RM (x) + (Plus) вы также получаете специальную кнопку обучения RS-Sweep (_LearnRF), которая может выучить больше устройств, чем на обычных 433 МГц.
* Установите для этого объекта значение true. (вы можете нажать на кнопку в представлении объекта)
* Теперь нажмите кнопку на пульте дистанционного управления в течение 30 секунд. в обычном режиме кратковременно нажмите их, пока они не научатся.
* В режиме RF-sweep вы должны долго нажимать кнопку в течение ~ 10-20 секунд, затем отпустить ее и подождать 2-3 секунды, прежде чем нажимать ее снова в течение очень короткого времени.
* Новый объект должен появиться внутри объекта "broadlink. [N]. [Devicename] .LearnedState" с именем ">>> Rename learn @ YYYYMMDDTHHmmSS"
* Вы можете нажать на кнопку в представлении объекта, чтобы отправить код.
* Чтобы переименовать элемент, нажмите на имя (начиная с `_Rename_learned_`) и измените имя. Он не должен включать `,`, `.` или`; `, а также некоторые другие символы, они будут заменены на '_';

Также можно использовать коды из [RM-Bridge](http://rm-bridge.fun2code.de/).
Просто создайте объект (состояние, кнопка типа) со значением, в котором вы добавляете «CODE_», или с собственной записью `code` без «CODE_».

## Примечание о новых устройствах RM4 / LB1
* Несколько новых Broadlink-Devices поддерживают новый протокол Broadlink-Cloud, который автоматически выбирается при использовании новых приложений Broadlink для подключения устройства к вашей сети Wi-Fi. Этот новый протокол Broadlink несовместим с адаптером broadlink2, и вы не можете использовать устройства, использующие этот новый протокол.
* Чтобы избежать этой проблемы, подключите устройство к сети с помощью более старых приложений Broadlink, таких как «e smart home» или «e-control», и убедитесь, что ваш телефон подключен к той же сети Wi-Fi 2,4 ГГц, к которой вы хотите подключить его!
* Эти новые устройства также требуют повторной аутентификации каждые 5-10 минут, что делает адаптер автоматически.

## Используйте сцены
* Сцены могут содержать идентификаторы или имена, а также числа, разделенные `,`. Обычно идентификаторы будут выполняться / отправляться с разницей во времени 100 мс, но если вам потребуется более длительная пауза между ними, вы можете записать число, которое отражает миллисекунды ожидания. Например, `SP: доза = 1, 1000, RM: your.L.StereoEin, 1000, RM: your.L.TVEin` включит беспроводной штекер с именем 'SP: доза', затем подождет одну секунду (фактически 1,1 секунды ), Включите стерео и через секунду телевизор. Вы также можете переключать устройства других адаптеров, например, `hm-rpc.0.MEQ1435726.1.STATE = true` включит это устройство Homematic! Состояния Boolsche можно переключать с помощью '= 1 / = on / = true / = ein', если вы оставите его без `=`, тогда он будет использовать true. Чтобы выключить устройство, вы заканчиваете его нажатием «= 0 / = false / = aus / = off», которое необходимо выключить!

## Использовать состояния
* Вы также можете создавать состояния для ваших устройств, которые объединяют команды включения и выключения в одно состояние, которое можно переключать как любое другое устройство.
* Вам нужно перечислить команды для включения и выключения состояния в отдельных столбцах, они могут быть несколькими, чтобы государство знало, когда ваше устройство включается / выключается любым из них.
* Если вы установите состояние on on или off onlöy, первая команда on / off будет отправлена
* Если присутствуют только команды, коммутатор отправит соответствующую команду с числовым значением -1, что означает, что он отправит первую команду, если он получит `0`, вторую, если он получит` 1`. Таким образом, вы можете моделировать несколько состояний в одном состоянии.
* Если вы используете только «+» в качестве команды выключения, вам нужно указать 10 команд, разделенных «,», которые отражают цифры «0-9» на пульте дистанционного управления. Затем вы можете отправить состояние, например, число `123` (макс. 9999), и оно будет отправлять` 1`, `2` и` 3` с задержкой 1/3 секунды между ними! Таким образом, вы можете установить, например, канал на телевизоре на «33», просто записав «TVchannel = 33», если название штата - «TVchannel».

## Используйте отправлять сообщения адаптеру
Адаптер также понимает команды sendTo.

* `debug`:` sendTo ('broadlink2.0', 'debug', 'on') `(также 0,1, on, off, ein, aus, true, false) включит режим отладки.
* `get`:` sendTo ('broadlink2.0', 'get', 'RM2: RMPROPLUS.Tempera'` может запрашивать данные с устройства, такие как `{val: 29.9, ack: true, ts: 1505839335870, q: 0, от: 'system.adapter.broadlink2.0', lc: 1505839335870} `zurück
* `switch`: может включить или выключить плагин:` sendTo ('broadlink2.0', 'switch', 'SP: id вашего устройства = вкл') `
* `switch_on` /` switch_off`: sendTo ('broadlink2.0', 'switch_on', 'SP: идентификатор вашего устройства') `
* `send`:` sendTo ('broadlink2.0', 'send', 'RM: yourdev._Learn') `запустит обучение и` sendTo ('broadlink2.0', 'send', 'RM: yourdev.L .yourid ') `отправит код.
* `send_scene`:` sendTo ('broadlink2.0', 'send_scene', 'scene xxx') `würde den als message angegebenen Текст сообщения als Szene ausführen
* `send_code`:` sendTo ('broadlink2.0', 'send_code', 'RM: ваш remote.CODE_xxxxx') `würde den CODE_xxxx vom R: ваше имя senden.

## Floureon или Beok313 Термостаты
* Большинство данных может быть установлено, время может быть установлено путем записи чего-либо в `_setTime`; в этом случае время устройства будет установлено на системное время ioBroker. Это будет сделано автоматически и при запуске адпера.

## Конфигурировать дополнительные устройства dnew
* Вы можете добавить новые устройства, которые используют тот же протокол, добавив их с идентификатором устройства (в шестнадцатеричном или десятичном виде) и классом устройства (там перечислены (класс = A1, MP1, RM, RMP, S1C, SP1, SP2, SP3P, T1). Таким образом, вы можете добавить новый пульт, который адаптер находит только как неизвестное устройство с шестнадцатеричным идентификатором 0x1234 в список RM с 0x01234 = RMP.

## Переименовать устройства
* Устройства обычно получают имя своего сетевого хоста или комбинацию типа устройства, идентификатора и MAC-адреса в качестве своего имени с первыми 2 буквами типа с «:» впереди. Вы можете переименовать такое устройство с помощью `T1: BroadLink-OEM-T1-fa-83-7c = Beok313`, и в этом случае исходное имя не будет использоваться, но новое имя будет` Beok313`.

## Режим отладки
* Если вы добавите `!` В конец списка добавленных новых устройств (даже если оно пустое), вы можете установить адаптер в режим отладки, в котором будет записываться много дополнительной информации, даже если для него не установлено значение ' информационный режим в Admin.

## Известные вопросы
* Если вы узнаете один и тот же сигнал несколько раз, код может отличаться каждый раз. Это не может быть изменено.
* Иногда не находит устройства, если они не отвечают на поиск. Выполните повторное сканирование или перезапустите адаптер, чтобы перезапустить новый экземпляр.

## Важно / Wichtig
* Требуется узел> = V6

## Установка
с администратором ioBroker npm установите iobroker.broadlink2 или по адресу <https://github.com/frankjoke/ioBroker.broadlink2>

## Changelog

### 2.1.0

* Added RM4 protocol for newest RM4 and RM3-Minis 
* Added LB1 Wifi bulb device support
* Added finding of devices if name or ip changes according to mac address
* Added support of devices in other netword with IP address
* Changed learning and device communication for all RM devices
* Re-write of 70% nof the code for new js-controllers and nodejs versions.

### 2.0.3

* changed to new myAdapter to support js-controller 2.0 and 3.0

### 2.0.1

* Can handle Floureon/Beko thermostats (now with MQTT)
* Can handle S1C security devices
* Names device after their name or with their mac to reduce possibility of renaming
* Can rename devices
* Support compact mode
* Can add device Id's/Types for new devices
* New communication routines to find & re-find devices
* New communication protocoll with devices which do not allow that devices can get commands from 2 sources intermixed

### 1.9.1

* added anothe RM Mini code

### 1.8.1

* Changed util.js and tests and added new devices

### 1.7.0

* Changed and corrected states which are created by A1-devices

### Todo for later revisions

* config of devices and codes in separate config tool

## License

The MIT License (MIT)

Copyright (c) 2014-2020, frankjoke <frankjoke@hotmail.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
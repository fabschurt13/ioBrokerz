---
translatedFrom: en
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/adapterref/iobroker.i2c/README.md
title: Адаптер ioBroker для I2C
hash: 9yLvFVolYnohYVz2xeO0SFDxNSYS0MgRquEsMgvBf88=
---
![Количество установок](http://iobroker.live/badges/i2c-stable.svg)
![Версия NPM](http://img.shields.io/npm/v/iobroker.i2c.svg)
![Загрузки](https://img.shields.io/npm/dm/iobroker.i2c.svg)
![Трэвис](https://img.shields.io/travis/UncleSamSwiss/ioBroker.i2c.svg)
![Проблемы с GitHub](https://img.shields.io/github/issues/UncleSamSwiss/ioBroker.i2c.svg)

*** **ВАЖНОЕ ОБНОВЛЕНИЕ**

Разработка этого адаптера будет возобновлена **августа 2020** Быть в курсе!

Я начну с решения самых насущных проблем, после чего выйдет новый крупный выпуск, в котором адаптер соответствует последним стандартам разработки.
***

![Логотип I2C](../../../en/adapterref/iobroker.i2c/admin/i2c.png)

# IoBroker адаптер для I2C
Обменивается данными с устройствами, подключенными к локальной системе по шине I2C.

Этот адаптер должен работать на платах Linux, таких как Raspberry Pi, C.H.I.P., BeagleBone или Intel Edison.

## Установить
Перед установкой прочтите [руководство по установке модуля i2c-bus](https://www.npmjs.com/package/i2c-bus#installation).

Особенно убедитесь, что вы правильно настроили и включили I2C в своей системе (при необходимости):

* [Настройка I2C на Raspberry Pi] (https://github.com/fivdi/i2c-bus/blob/master/doc/raspberry-pi-i2c.md)
* [Настройка I2C на базовой плате Intel Edison Arduino] (https://github.com/fivdi/i2c-bus/blob/master/doc/edison-adruino-base-board-i2c.md)

После того, как вы включили и настроили I2C, вы можете установить этот адаптер через ioBroker Admin:

1. Запустите адаптер (он должен работать, чтобы обнаружение работало)
2. Откройте диалоговое окно конфигурации экземпляра.
3. Нажмите кнопку «Поиск устройств», чтобы обнаружить все подключенные устройства I2C - это займет некоторое время, наберитесь терпения!
4. Настройте все найденные устройства на соответствующих вкладках.
5. Сохраните конфигурацию (это перезапустит адаптер).

### Проблема с правом доступа
В зависимости от возраста вашей установки ioBroker, пользователь `iobroker` (или другой пользователь ioBroker) может не иметь необходимых прав для доступа к I2C.

Если вы подключили устройство и оно не отображается на экране конфигурации, убедитесь, что пользователь добавлен в группу `i2c`:

```sh
sudo usermod -G i2c iobroker
```

Примечание: если у вас нет стандартной установки, замените `iobroker` в приведенной выше команде на пользователя, запустившего вашу установку ioBroker (проверьте с `ps`).

## Конфигурация
### Номер автобуса
Это номер шины / адаптера I2C, который нужно открыть, 0 для / dev / i2c-0, 1 для / dev / i2c-1, ...

На Raspberry Pi 3 и 4B это «1».

## Поддерживаемые устройства
В настоящее время поддерживаются следующие устройства. Числа в скобках - это известные адреса устройства в шестнадцатеричном формате (без бита чтения).

### ADS1015 (48-4B)
Texas Instruments 4x 3,3-kSPS, 12-разрядные АЦП с внутренним опорным сигналом.

### ADS1115 (48-4B)
Texas Instruments 4x 860-SPS, 16-разрядные АЦП с внутренним опорным сигналом.

### BME280 (76, 77)
Цифровой датчик влажности, давления и температуры Bosch.

### MCP23008 8-битный расширитель ввода / вывода (20-27)
8-битный расширитель ввода / вывода Microchip с последовательным интерфейсом.

### MCP23017 16-битный расширитель ввода / вывода (20-27)
16-разрядный расширитель ввода / вывода Microchip с последовательным интерфейсом.

### PCF8574 8-битный расширитель ввода / вывода (20-27)
8-разрядный удаленный расширитель ввода / вывода Texas Instruments для шины I2C.

### PCF8574A 8-битный расширитель ввода / вывода (38-3F)
8-разрядный удаленный расширитель ввода / вывода Texas Instruments для шины I2C.

### PCA9685 16-канальный 12-битный ШИМ-драйвер сервопривода / светодиода (40-7F)
Коммутационная плата Adafruit PCA9685 для 16-канальной 12-битной ШИМ. Адаптер ориентирован на использование 16 каналов от 0..4095 в качестве светорегулятора.
Может управлять многими светодиодами, когда PWM (и GND) подключен к N-канальному модулю Mosfet, например. на основе D4184. Подключите LED GND к MOSFET и + 12/24 / n V к PSU.

### Общее устройство (03-77)
Обычное устройство I2C. Регистры могут быть настроены в зависимости от оборудования.

## Использование в скриптах
Поддерживаемые команды для `sendTo` в скриптах: `search`, `read` и `write`.

`search` принимает в качестве сообщения номер шины и возвращает строку JSON массива найденных адресов на шине.

`read` принимает в качестве сообщения объект, содержащий адрес и, необязательно, регистр и количество байтов для чтения. Возвращает буфер с прочитанными данными.

`write` принимает в качестве сообщения объект, содержащий адрес, данные в качестве буфера и, необязательно, регистр для записи. В случае успеха возвращает записанный буфер.

### Примеры использования скрипта
```js
sendTo('i2c.0', 'search', 1, (ret) => {
    log('Ret: ' + ret, 'info');
});

sendTo('i2c.0', 'read', {
    address: 0x40,
    register: 0x02,
    bytes: 2
}, (ret) => {
    log('Ret: ' + ret.inspect(), 'info');
});

sendTo('i2c.0', 'write', {
    address: 0x40,
    register: 0x00,
    data: Buffer.from([0x44, 0x27])
}, (ret) => {
    log('Ret: ' + ret.inspect(), 'info');
});
```

## Совместимость
Совместимость проверена с Raspberry Pi 3 и 4B.

## Отчеты об ошибках и запросы функций
Пожалуйста, используйте репозиторий GitHub, чтобы сообщать об ошибках или запрашивать новые функции.

Если вам требуются отсутствующие устройства, укажите тип ИС (марка, модель, ...) и ее адрес (а), как указано в конфигурации адаптера.

## Спасибо
Этот проект основан на модуле NPM [i2c-автобус](https://www.npmjs.com/package/i2c-bus). Спасибо fivdi за его отличный модуль!

## Сторонние лицензии
### BME280
Код BME280 основан на https://github.com/skylarstein/bme280-sensor:

Лицензия MIT

Авторские права (c) 2016 Skylar Stein

Настоящим предоставляется бесплатное разрешение любому лицу, получившему копию этого программного обеспечения и связанных файлов документации («Программное обеспечение»), для работы с Программным обеспечением без ограничений, включая, помимо прочего, права на использование, копирование, изменение, объединение. , публиковать, распространять, сублицензировать и / или продавать копии Программного обеспечения и разрешать лицам, которым предоставляется Программное обеспечение, делать это при соблюдении следующих условий:

Вышеупомянутое уведомление об авторских правах и это уведомление о разрешении должны быть включены во все копии или существенные части Программного обеспечения.

ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ ПРЕДОСТАВЛЯЕТСЯ «КАК ЕСТЬ», БЕЗ КАКИХ-ЛИБО ГАРАНТИЙ, ЯВНЫХ ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ, НО НЕ ОГРАНИЧИВАЯСЬ, ГАРАНТИИ КОММЕРЧЕСКОЙ ПРИГОДНОСТИ, ПРИГОДНОСТИ ДЛЯ ОПРЕДЕЛЕННОЙ ЦЕЛИ И НЕЗАЩИТЫ ОТ ОТВЕТСТВЕННОСТИ. НИ ПРИ КАКИХ ОБСТОЯТЕЛЬСТВАХ АВТОРЫ ИЛИ ВЛАДЕЛЬЦЫ АВТОРСКИХ ПРАВ НЕ НЕСЕТ ОТВЕТСТВЕННОСТИ ЗА ЛЮБЫЕ ПРЕТЕНЗИИ, УБЫТКИ ИЛИ ДРУГИЕ ОТВЕТСТВЕННОСТЬ, БЫЛИ В РЕЗУЛЬТАТЕ ДОГОВОРА, ПРАКТИЧЕСКИХ ПРАВ ИЛИ ИНЫХ СЛУЧАЕВ, ВОЗНИКАЮЩИХ, ВНУТРИ ИЛИ В СВЯЗИ С ПРОГРАММНЫМ ОБЕСПЕЧЕНИЕМ ИЛИ ИСПОЛЬЗОВАНИЕМ ИЛИ ДРУГИМИ ДЕЛАМИ ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ.

### ADS1x15
Код ADS1x15 основан на https://github.com/alphacharlie/node-ads1x15/blob/master/index.js

сам node-ads1x15 основан на https://github.com/adafruit/Adafruit_Python_ADS1x15

Лицензия MIT (MIT)

Авторские права (c) Adafruit Industries, 2016 г.

Настоящим предоставляется бесплатное разрешение любому лицу, получившему копию этого программного обеспечения и связанных файлов документации («Программное обеспечение»), для работы с Программным обеспечением без ограничений, включая, помимо прочего, права на использование, копирование, изменение, объединение. , публиковать, распространять, сублицензировать и / или продавать копии Программного обеспечения и разрешать лицам, которым предоставляется Программное обеспечение, делать это при соблюдении следующих условий:

Вышеупомянутое уведомление об авторских правах и это уведомление о разрешении должны быть включены во все копии или существенные части Программного обеспечения.

ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ ПРЕДОСТАВЛЯЕТСЯ «КАК ЕСТЬ», БЕЗ КАКИХ-ЛИБО ГАРАНТИЙ, ЯВНЫХ ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ, НО НЕ ОГРАНИЧИВАЯСЬ, ГАРАНТИИ КОММЕРЧЕСКОЙ ПРИГОДНОСТИ, ПРИГОДНОСТИ ДЛЯ ОПРЕДЕЛЕННОЙ ЦЕЛИ И НЕЗАЩИТЫ ОТ ОТВЕТСТВЕННОСТИ. НИ ПРИ КАКИХ ОБСТОЯТЕЛЬСТВАХ АВТОРЫ ИЛИ ВЛАДЕЛЬЦЫ АВТОРСКИХ ПРАВ НЕ НЕСЕТ ОТВЕТСТВЕННОСТИ ЗА ЛЮБЫЕ ПРЕТЕНЗИИ, УБЫТКИ ИЛИ ДРУГИЕ ОТВЕТСТВЕННОСТЬ, БЫЛИ В РЕЗУЛЬТАТЕ ДОГОВОРА, ПРАКТИЧЕСКИХ ПРАВ ИЛИ ИНЫХ СЛУЧАЕВ, ВОЗНИКАЮЩИХ, ВНУТРИ ИЛИ В СВЯЗИ С ПРОГРАММНЫМ ОБЕСПЕЧЕНИЕМ ИЛИ ИСПОЛЬЗОВАНИЕМ ИЛИ ДРУГИМИ ДЕЛАМИ ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ.

### PCA9685
Код PCA9685 основан на https://github.com/adafruit/Adafruit_Python_PCA9685/blob/master/Adafruit_PCA968/PCA9685.py

Лицензия MIT (MIT)

Авторские права (c) Adafruit Industries, 2016 Автор: Тони ДиКола

Настоящим предоставляется бесплатное разрешение любому лицу, получившему копию этого программного обеспечения и связанных файлов документации («Программное обеспечение»), для работы с Программным обеспечением без ограничений, включая, помимо прочего, права на использование, копирование, изменение, объединение. , публиковать, распространять, сублицензировать и / или продавать копии Программного обеспечения и разрешать лицам, которым предоставляется Программное обеспечение, делать это при соблюдении следующих условий:

Вышеупомянутое уведомление об авторских правах и это уведомление о разрешении должны быть включены во все копии или существенные части Программного обеспечения.

ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ ПРЕДОСТАВЛЯЕТСЯ «КАК ЕСТЬ», БЕЗ КАКИХ-ЛИБО ГАРАНТИЙ, ЯВНЫХ ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ, НО НЕ ОГРАНИЧИВАЯСЬ, ГАРАНТИИ КОММЕРЧЕСКОЙ ПРИГОДНОСТИ, ПРИГОДНОСТИ ДЛЯ ОПРЕДЕЛЕННОЙ ЦЕЛИ И НЕЗАЩИТЫ ОТ ОТВЕТСТВЕННОСТИ. НИ ПРИ КАКИХ ОБСТОЯТЕЛЬСТВАХ АВТОРЫ ИЛИ ВЛАДЕЛЬЦЫ АВТОРСКИХ ПРАВ НЕ НЕСЕТ ОТВЕТСТВЕННОСТИ ЗА ЛЮБЫЕ ПРЕТЕНЗИИ, УБЫТКИ ИЛИ ДРУГИЕ ОТВЕТСТВЕННОСТЬ, БЫЛИ В РЕЗУЛЬТАТЕ ДОГОВОРА, ПРАКТИЧЕСКИХ ПРАВ ИЛИ ИНЫХ СЛУЧАЕВ, ВОЗНИКАЮЩИХ, ВНУТРИ ИЛИ В СВЯЗИ С ПРОГРАММНЫМ ОБЕСПЕЧЕНИЕМ ИЛИ ИСПОЛЬЗОВАНИЕМ ИЛИ ДРУГИМИ ДЕЛАМИ ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ.

Также на основе: https://github.com/tessel/servo-pca9685/blob/master/index.js

Copyright 2014 Technical Machine, Inc. См. Файл COPYRIGHT в каталоге верхнего уровня этого дистрибутива.

Под лицензией Apache License, версия 2.0 <LICENSE-APACHE или http://www.apache.org/licenses/LICENSE-2.0> или лицензия MIT <LICENSE-MIT или http://opensource.org/licenses/MIT> , на ваше усмотрение. Этот файл нельзя копировать, изменять или распространять, кроме как в соответствии с этими условиями.

## Changelog

### 0.0.8 (2020-05-26)
* (Peter Müller) Added support for Generic device.
* (Peter Müller) Added support for `read` and `write` commands in scripts using `sendTo`.
* (Peter Müller) Added support for interrupts on PCF8574, MCP23008, MCP23017 devices.

### 0.0.7 (2020-01-19)
* (CC1337) Added support for PCA9685.

### 0.0.6 (2019-03-17)
* (UncleSamSwiss) Added support for BME280.
* (UncleSamSwiss) Added support for ADS1015 / ADS1115.

### 0.0.5 (2019-01-12)
* (UncleSamSwiss) Added support for MCP23008.

### 0.0.4 (2018-07-23)
* (UncleSamSwiss) Improved stability of MCP23017.
* (Apollon77) Latest ioBroker utils and testing including node 10.

### 0.0.3 (2017-11-12)
* (UncleSamSwiss) Added support for MCP23017.

### 0.0.2 (2017-07-30)
* (UncleSamSwiss) Added support for inverting PCF8574 inputs and outputs.

### 0.0.1 (2017-07-27)
* (UncleSamSwiss) Initial version